[TOC]

## chapter01

### 演化发展历程

- 初始阶段

应用程序、数据库、文件等所有资源都在一台服务器上。

- 应用服务和数据服务分离

此时有三台服务器：应用服务器、文件服务器、数据库服务器

- 使用缓存改善网站性能

80%的业务访问集中仔20%的数据上。

- 应用服务器集群改善并发处理能力

不要企图换更强大的服务器，而是增加

- 数据库读写分离

- 反向代理和CDN

基本原理都是缓存

- 使用分布式文件和数据库系统

- 使用 NOSQL 和搜索引擎

- 业务拆分

- 分布式服务

服务器的增加 数据库链接会急剧增加 最终导致数据库链接资源不足 可以把共用的业务提取出来独立部署 由共用业务服务链接数据库 

### 网站架构设计误区

- 一味追随大公司的解决方案

合适的才是最好的

note 技术是用来解决业务问题，而业务的问题，也可以通过业务的手段去解决。

## chapter02

### 什么是模式

每一个模式描述了一个在我们周围不断重复发生的问题及该问题解决方案的核心。这样，你就能一次又一次地使用该方案而不必做重复工作。

### 分层

在大型网站架构中也采用分层结构，降网站软件系统分为应用层、服务层、数据层。

|应用层|负责具体业务和视图展示|
|:-|:-|
|服务层|为应用层提供服务支持|
|数据层|提供数据存储访问服务|

禁止跨层次调用以及逆向调用

### 分割

将软件或者网站分割成不同的服务或功能，包装成高内聚低耦合的模块单元。

### 分布式

不要为了分布式而分布式

- 分布式应用和服务

- 分布式静态资源

- 分布式数据和存储

- 分布式计算

### 集群

提高系统的可用性

### 缓存

- CDN
- 反向代理
- 本地缓存
- 分布式缓存

### 异步

多线程、分布式消息队列

- 提高系统可用性
- 加快网站响应速度
- 消除并发访问高峰

### 冗余

- 数据库冷备份、热备份
- 灾备数据中心

### 自动化

#### 发布过程自动化

- 自动化代码管理
- 自动化测试
- 自动化安全检测
- 自动化部署

#### 上线之后

- 自动化监控、报警
- 自动化失效转移

将失效的服务器从集群中隔离出去，不再接收处理请求

- 自动化失效恢复
- 自动化降级

通过拒绝部分请求以及关闭部分不重要的服务将系统负载降至一个安全的水平。

- 自动化分配资源

### 安全

- 身份校验
- 加密传输
- 常见攻击防御

### 新浪微博架构

- mpss multiport single server 单服务器多端口
- 同步推送推文 异步推拉

📝对问题和需求是否真正理解与把握，决定了是山寨还是创新。

